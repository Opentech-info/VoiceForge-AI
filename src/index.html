<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0F1117" />
    <meta
      http-equiv="Content-Security-Policy"
      content="
      default-src 'self';
      script-src 'self' 'unsafe-inline';
      style-src 'self' 'unsafe-inline';
      img-src 'self' data: blob:;
      font-src 'self' data:;
      connect-src 'self' blob:;
      media-src 'self' blob: mediastream:;
      worker-src 'self' blob:;
      child-src 'self' blob:;
      object-src 'none';
      base-uri 'self';
      form-action 'self';
      frame-ancestors 'none';
      upgrade-insecure-requests;
    "
    />
    <meta
      name="description"
      content="Offline Mobile AI Voice Generator for Content Creators"
    />
    <title>VoiceForge AI - Offline Voice Studio</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/responsive.css" />
  </head>
  <body>
    <!-- Splash Screen / Welcome Page -->
    <div class="splash-screen" id="splashScreen">
      <div class="splash-content">
        <!-- Brand Name -->
        <div class="splash-brand">
          <span class="brand-name">AZsubay</span>
          <span class="brand-tagline">üé§ voice inside light</span>
        </div>

        <!-- App Name with Animated Gradient -->
        <h1 class="splash-title">VOICEFORGE AI</h1>

        <!-- Voice Icon Circle with Neon Glow -->
        <div class="splash-icon-container">
          <img src="assets/voice.png" alt="Voice" class="splash-icon" />
        </div>

        <!-- Get Started Button -->
        <button class="splash-btn" id="getStartedBtn">GET STARTED</button>
      </div>
    </div>

    <div class="app-container">
      <!-- Top Navigation Bar -->
      <header class="top-bar">
        <div class="top-bar-content">
          <div class="app-logo">
            <span class="logo-icon">üéôÔ∏è</span>
            <h1 class="app-title" data-i18n="app_name">VoiceForge AI</h1>
          </div>
          <div class="top-bar-actions">
            <div class="language-switcher" id="languageSwitcher">
              <button
                class="language-btn"
                id="languageToggle"
                title="Switch language"
              >
                <span class="language-icon">üåê</span>
                <span class="language-flag" id="currentLanguageFlag">üá∫üá∏</span>
              </button>
              <div class="language-menu hidden" id="languageMenu">
                <button class="language-option" data-lang="en">
                  üá∫üá∏ English
                </button>
                <button class="language-option" data-lang="sw">
                  üáπüáø Swahili
                </button>
              </div>
            </div>
            <button
              class="theme-toggle"
              id="themeToggle"
              title="Toggle light/dark mode"
            >
              <span class="theme-icon">üåô</span>
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Input Section -->
        <section class="section input-section">
          <h2 class="section-title" data-i18n="sections.input">üìù Your Text</h2>
          <textarea
            id="textInput"
            class="text-input"
            data-i18n-placeholder="placeholders.text_input"
            placeholder="Enter the text you want to convert to speech...&#10;&#10;Example: Hello, this is VoiceForge AI speaking!"
            maxlength="2000"
          ></textarea>
          <div class="input-info">
            <span class="char-count"><span id="charCount">0</span>/2000</span>
          </div>
        </section>

        <!-- Voice Selection Section -->
        <section class="section voice-section">
          <h2 class="section-title" data-i18n="sections.voice">
            üé§ Select Voice
          </h2>
          <div class="voice-grid" id="voiceGrid">
            <!-- Voice cards generated by JavaScript -->
          </div>
        </section>

        <!-- Controls Section -->
        <section class="section controls-section">
          <h2 class="section-title" data-i18n="sections.controls">
            ‚öôÔ∏è Voice Settings
          </h2>
          <div class="controls-grid">
            <div class="control-group">
              <label
                for="speedSlider"
                class="control-label"
                data-i18n="labels.speed"
                >Speed</label
              >
              <input
                type="range"
                id="speedSlider"
                class="slider"
                min="0.5"
                max="2"
                step="0.1"
                value="1"
              />
              <span class="control-value" id="speedValue">1.0x</span>
            </div>
            <div class="control-group">
              <label
                for="pitchSlider"
                class="control-label"
                data-i18n="labels.pitch"
                >Pitch</label
              >
              <input
                type="range"
                id="pitchSlider"
                class="slider"
                min="0.5"
                max="2"
                step="0.1"
                value="1"
              />
              <span class="control-value" id="pitchValue">1.0x</span>
            </div>
            <div class="control-group">
              <label
                for="formatSelect"
                class="control-label"
                data-i18n="labels.format"
                >Export Format</label
              >
              <select id="formatSelect" class="format-select">
                <option value="wav" data-i18n="formats.wav">
                  WAV (High Quality)
                </option>
                <option value="mp3" data-i18n="formats.mp3">
                  MP3 (Compressed)
                </option>
                <option value="ogg" data-i18n="formats.ogg">
                  OGG (Web Optimized)
                </option>
                <option value="webm" data-i18n="formats.webm">
                  WebM (Modern)
                </option>
              </select>
              <span
                class="control-value"
                style="font-size: 0.7em; color: var(--text-hint)"
                >üéµ</span
              >
            </div>
          </div>
        </section>

        <!-- Action Buttons Section -->
        <section class="section action-section">
          <button
            class="btn btn-secondary"
            id="previewBtn"
            title="Preview selected voice"
          >
            <span class="btn-icon">üéß</span>
            <span class="btn-text" data-i18n="buttons.preview"
              >Preview Voice</span
            >
            <span class="btn-loading hidden" id="previewLoader"></span>
          </button>
          <button class="btn btn-primary" id="generateBtn">
            <span class="btn-icon">‚ú®</span>
            <span class="btn-text" data-i18n="buttons.generate"
              >Generate Voice</span
            >
            <span class="btn-loading hidden" id="generateLoader"></span>
          </button>
        </section>

        <!-- Audio Player Section -->
        <section class="section audio-section hidden" id="audioSection">
          <h2 class="section-title" data-i18n="sections.audio">
            üîä Your Audio
          </h2>

          <!-- Waveform Display -->
          <div class="waveform-container">
            <canvas id="waveformCanvas" class="waveform"></canvas>
          </div>

          <!-- Audio Player -->
          <audio id="audioPlayer" class="audio-player" controls></audio>

          <!-- Player Controls -->
          <div class="player-controls">
            <button class="btn btn-success" id="playBtn" title="Play audio">
              <span data-i18n="buttons.play">‚ñ∂Ô∏è Play</span>
            </button>
            <button
              class="btn btn-warning"
              id="downloadBtn"
              title="Download audio"
            >
              <span data-i18n="buttons.download">‚¨áÔ∏è Download</span>
            </button>
            <button class="btn btn-secondary" id="shareBtn" title="Share audio">
              <span data-i18n="buttons.share">üì§ Share</span>
            </button>
          </div>

          <!-- Download Status -->
          <div class="download-status hidden" id="downloadStatus">
            <span id="downloadMessage"></span>
          </div>
        </section>

        <!-- History Section (Optional) -->
        <section class="section history-section hidden" id="historySection">
          <h2 class="section-title" data-i18n="sections.history">
            üìã Recent Generations
          </h2>
          <div class="history-list" id="historyList">
            <!-- History items added by JavaScript -->
          </div>
        </section>

        <!-- Error Toast -->
        <div class="toast hidden" id="errorToast">
          <span id="toastMessage"></span>
        </div>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <p data-i18n="footer.version">
          VoiceForge AI v0.1.0 ‚Ä¢ Works offline ‚Ä¢ No subscriptions needed
        </p>
        <p class="footer-secondary" data-i18n="footer.tagline">
          Built for content creators with ‚ù§Ô∏è
        </p>
      </footer>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/i18n.js"></script>
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/audio-engine.js"></script>
    <script type="module" src="js/ui-controller.js"></script>
    <script type="module" src="js/app.js"></script>

    <!-- Service Worker Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("./sw.js")
            .then((reg) => {
              console.log("[SW] Service Worker registered successfully:", reg);
            })
            .catch((err) => {
              console.warn("[SW] Service Worker registration failed:", err);
            });
        });
      }
    </script>
  </body>
</html>
